/*! For license information please see module.js.LICENSE.txt */
define(["d3","react","@grafana/data"],(function(t,e,r){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/",r(r.s=7)}([function(e,r){e.exports=t},function(t,r){t.exports=e},function(t,e){t.exports=r},function(t,e,r){var n=r(4),a=r(5);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[t.i,a,""]]);var o={insert:"head",singleton:!1},i=(n(a,o),a.locals?a.locals:{});t.exports=i},function(t,e,r){"use strict";var n,a=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},o=function(){var t={};return function(e){if(void 0===t[e]){var r=document.querySelector(e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}t[e]=r}return t[e]}}(),i=[];function c(t){for(var e=-1,r=0;r<i.length;r++)if(i[r].identifier===t){e=r;break}return e}function s(t,e){for(var r={},n=[],a=0;a<t.length;a++){var o=t[a],s=e.base?o[0]+e.base:o[0],l=r[s]||0,u="".concat(s," ").concat(l);r[s]=l+1;var d=c(u),p={css:o[1],media:o[2],sourceMap:o[3]};-1!==d?(i[d].references++,i[d].updater(p)):i.push({identifier:u,updater:g(p,e),references:1}),n.push(u)}return n}function l(t){var e=document.createElement("style"),n=t.attributes||{};if(void 0===n.nonce){var a=r.nc;a&&(n.nonce=a)}if(Object.keys(n).forEach((function(t){e.setAttribute(t,n[t])})),"function"==typeof t.insert)t.insert(e);else{var i=o(t.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(e)}return e}var u,d=(u=[],function(t,e){return u[t]=e,u.filter(Boolean).join("\n")});function p(t,e,r,n){var a=r?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(t.styleSheet)t.styleSheet.cssText=d(e,a);else{var o=document.createTextNode(a),i=t.childNodes;i[e]&&t.removeChild(i[e]),i.length?t.insertBefore(o,i[e]):t.appendChild(o)}}function f(t,e,r){var n=r.css,a=r.media,o=r.sourceMap;if(a?t.setAttribute("media",a):t.removeAttribute("media"),o&&btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}var h=null,A=0;function g(t,e){var r,n,a;if(e.singleton){var o=A++;r=h||(h=l(e)),n=p.bind(null,r,o,!1),a=p.bind(null,r,o,!0)}else r=l(e),n=f.bind(null,r,e),a=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(r)};return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else a()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=a());var r=s(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var n=0;n<r.length;n++){var a=c(r[n]);i[a].references--}for(var o=s(t,e),l=0;l<r.length;l++){var u=c(r[l]);0===i[u].references&&(i[u].updater(),i.splice(u,1))}r=o}}}},function(t,e,r){(e=r(6)(!0)).push([t.i,".netsage_boilerplate-custom-style{background:#f8ae63}div.tooltip{position:absolute;text-align:left;color:#000;width:250px;height:auto;padding:5px 10px;font:14px sans-serif;background:#dde4ed;border:5px solid #fff;border-radius:8px;pointer-events:none}.header-text{text-align:left;font:15px sans-serif;font-weight:bold}.dropdown-text{text-align:right;font:14px sans-serif}.tick{width:300px;word-wrap:break-word;padding:10px}.tick text{width:300px;word-wrap:break-word;padding:0;font-size:12px}#chart-area{height:inherit}.path-hover{cursor:pointer}.axis{font-size:13px}.section-heading{font-weight:bold}.dropdownMenu{width:100px;text-align:right;float:right}","",{version:3,sources:["styles.css"],names:[],mappings:"AAAA,kCAAkC,kBAAkB,CAAC,YAAY,iBAAiB,CAAC,eAAe,CAAC,UAAU,CAAC,WAAW,CAAC,WAAW,CAAC,gBAAgB,CAAC,oBAAoB,CAAC,kBAAkB,CAAC,qBAAqB,CAAC,iBAAiB,CAAC,mBAAmB,CAAC,aAAa,eAAe,CAAC,oBAAoB,CAAC,gBAAgB,CAAC,eAAe,gBAAgB,CAAC,oBAAoB,CAAC,MAAM,WAAW,CAAC,oBAAoB,CAAC,YAAY,CAAC,WAAW,WAAW,CAAC,oBAAoB,CAAC,SAAS,CAAC,cAAc,CAAC,YAAY,cAAc,CAAC,YAAY,cAAc,CAAC,MAAM,cAAc,CAAC,iBAAiB,gBAAgB,CAAC,cAAc,WAAW,CAAC,gBAAgB,CAAC,WAAW",file:"styles.css",sourcesContent:[".netsage_boilerplate-custom-style{background:#f8ae63}div.tooltip{position:absolute;text-align:left;color:#000;width:250px;height:auto;padding:5px 10px;font:14px sans-serif;background:#dde4ed;border:5px solid #fff;border-radius:8px;pointer-events:none}.header-text{text-align:left;font:15px sans-serif;font-weight:bold}.dropdown-text{text-align:right;font:14px sans-serif}.tick{width:300px;word-wrap:break-word;padding:10px}.tick text{width:300px;word-wrap:break-word;padding:0;font-size:12px}#chart-area{height:inherit}.path-hover{cursor:pointer}.axis{font-size:13px}.section-heading{font-weight:bold}.dropdownMenu{width:100px;text-align:right;float:right}"]}]),t.exports=e},function(t,e,r){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var r=function(t,e){var r=t[1]||"",n=t[3];if(!n)return r;if(e&&"function"==typeof btoa){var a=(i=n,c=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),s="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(c),"/*# ".concat(s," */")),o=n.sources.map((function(t){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(t," */")}));return[r].concat(o).concat([a]).join("\n")}var i,c,s;return[r].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(r,"}"):r})).join("")},e.i=function(t,r,n){"string"==typeof t&&(t=[[null,t,""]]);var a={};if(n)for(var o=0;o<this.length;o++){var i=this[o][0];null!=i&&(a[i]=!0)}for(var c=0;c<t.length;c++){var s=[].concat(t[c]);n&&a[s[0]]||(r&&(s[2]?s[2]="".concat(r," and ").concat(s[2]):s[2]=r),e.push(s))}},e}},function(t,e,r){"use strict";r.r(e);var n=r(2);var a=function(){return(a=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var a in e=arguments[r])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};Object.create;Object.create;var o=r(1),i=r.n(o);var c=r(0);function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.containerID=e}var e,r,n;return e=t,(r=[{key:"renderChart",value:function(t,e,r){var n=document.getElementById(this.containerID);if(n.innerHTML="",c.select("#"+this.containerID).selectAll("svg").remove(),c.select("#"+this.containerID).selectAll(".dropdownMenu").remove(),c.select("#"+this.containerID).selectAll(".tooltip").remove(),0!=t.length){t.length<r&&(r=t.length);var a=t.parsedData,o=t.finalPositions,i=t.colorPal,s=t.dates,l=this.containerID,u=document.getElementById(this.containerID).offsetWidth,d=document.getElementById(this.containerID).offsetHeight,p=25,f=325,h=150,A=25,g=25,v=u-A-f,x=d-p-h,y=v+A+f-120,b=c.line().x((function(t){return B(t.date)})).y((function(t){return M(t.rank)})).curve(c.curveMonotoneX),m=c.extent(a[0].data,(function(t){return t.date})),C=r-1,w=[0,C],k=c.timeFormat("%m/%d/%y"),B=c.scaleTime().domain(m).range([0,v]),M=c.scaleLinear().domain(w).range([0,x]);c.select("#"+l).insert("select","svg").on("change",(function(t){!function(t){w=[0,C=t-1],M.domain(w),I=c.axisRight(M).ticks(t).tickSize(5).tickFormat((function(t){return null==o[t]?"":o[t].org}));var e=c.select("#"+l).transition();e.select(".yAxis").duration(750).call(I).selectAll(".tick text").call(W,f-25);for(var r=0;r<a.length;r++){var n=a[r].data;e.select(".org-"+r+l).duration(750).attr("d",b(n)),e.selectAll("circle").duration(750).attr("cx",(function(t){return B(t.date)})).attr("cy",(function(t){return M(t.rank)}))}}(c.select(this).property("value"))})).selectAll("option").data([10,9,8,7,6,5,4,3]).enter().append("option").text((function(t){return t})).attr("value",(function(t){return t})),c.selectAll("select").attr("class","dropdownMenu"),c.select("#"+l).insert("svg","svg").attr("width",y).attr("height",30).append("text").attr("class","dropdown-text").attr("transform","translate("+y+", 20)").style("text-anchor","end").text("Number of Lines to Display: ");var j=c.select("#"+this.containerID).append("svg").attr("width",v+A+f).attr("height",x+p+h+g).append("g").attr("height",x).attr("transform","translate("+A+","+p+")"),I=c.axisRight(M).ticks(r-1).tickSize(5).tickFormat((function(t){return null==o[t]?"":o[t].org})),O=c.axisBottom(B).tickValues(s).tickSize(5).tickFormat(k);j.append("g").call(I).attr("margin",10).attr("transform","translate("+(v+g)+","+p+")").attr("class","yAxis").selectAll(".tick text").call(W,f-25).attr("transform","translate(10,0)"),j.append("g").call(O).attr("class","axis").attr("transform","translate("+g+","+(x+g+p)+")").selectAll(".tick text").call(W,100).attr("transform","rotate(-60)").style("text-anchor","end"),j.append("text").attr("class","header-text").attr("transform","translate("+(v+A+10)+" ,"+p/4+")").style("text-anchor","start").text(e);for(var S=c.select("body").append("div").attr("class","tooltip").style("opacity",0),T=0;T<a.length;T++){var P=a[T].data;j.append("svg").attr("width",v+g).attr("height",x+g+p).append("g").data(P).attr("transform","translate("+g+","+p+")").append("path").attr("class","org-"+T+l).attr("fill","none").attr("stroke",i[T%i.length]).attr("opacity",.5).attr("stroke-width",7).attr("d",b(P)).on("mouseover",(function(t){c.selectAll("path").attr("opacity",.2),c.select(this).attr("opacity",1);var e=c.select(this).attr("class");c.selectAll("circle").each((function(t){var r=c.select(this).attr("class"),n=e===r;c.select(this).attr("opacity",n?1:.2).attr("fill-opacity",n?.9:.2)})),S.transition().duration(200).style("opacity",.9),S.html((function(){return"<b>"+t.org+"</b>"})).style("left",c.event.pageX+"px").style("top",c.event.pageY-28+"px")})).on("mouseout",(function(t){S.transition().duration(500).style("opacity",0),c.selectAll("path").attr("opacity",.5),c.selectAll("circle").attr("fill-opacity",.5).attr("opacity",.7)})),j.append("svg").attr("width",v+10+g).attr("height",x+g+p).append("g").attr("transform","translate("+g+","+p+")").selectAll("circle").data(P).enter().append("circle").attr("class","org-"+T+l).attr("cx",(function(t){return B(t.date)})).attr("cy",(function(t){return M(t.rank)})).attr("fill",i[T%i.length]).attr("fill-opacity",.5).attr("r",10).attr("stroke",i[T%i.length]).attr("opacity",.7).attr("stroke-width",1.5)}c.select("body").append("div").attr("class","small-tooltip"),j.selectAll("circle").on("mouseover",(function(t){var e=c.select(this).attr("class");c.selectAll("circle").each((function(t){var r=c.select(this).attr("class"),n=e===r;c.select(this).attr("opacity",n?1:.2).attr("fill-opacity",n?1:.2)})),c.selectAll("path").each((function(t){var r=c.select(this).attr("class"),n=e===r;c.select(this).attr("opacity",n?1:.2)})),S.transition().duration(200).style("opacity",.9),S.html((function(){var e=t.rank+1,r=t.value,n=r+"bytes";return(r/=1e3)<1e3?n=Math.round(10*r)/10+" KB":(r/=1e3)<1e3?n=Math.round(10*r)/10+" MB":(r/=1e3)<1e3?n=Math.round(10*r)/10+" GB":(r/=1e3)<1e3?n=Math.round(10*r)/10+" TB":(r/=1e3,n=Math.round(10*r)/10+" PB"),"<b>#"+e+": </b>"+t.org+"<br><b>Volume: </b>"+n})).style("left",c.event.pageX+"px").style("top",c.event.pageY-28+"px")})).on("mouseout",(function(t){S.transition().duration(500).style("opacity",0),c.selectAll("circle").attr("fill-opacity",.5).attr("opacity",.7),c.selectAll("path").attr("opacity",.5)}))}else n.innerHTML+="No Data";function W(t,e){t.each((function(){for(var t,r=c.select(this),n=r.text().split(/\s+/).reverse(),a=[],o=0,i=r.attr("y"),s=parseFloat(r.attr("dy")),l=r.text(null).append("tspan").attr("x",0).attr("y",i).attr("dy",s+"em");t=n.pop();)a.push(t),l.text(a.join(" ")),l.node().getComputedTextLength()>e&&(a.pop(),l.text(a.join(" ")),a=[t],l=r.append("tspan").attr("x",0).attr("y",i).attr("dy",1.1*++o+s+"em").text(t))}))}}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),u=(r(3),function(t){return Object(o.useEffect)((function(){var e=t.panelId,r=new l("Chart_"+e);t.data&&r.renderChart(t.data,t.options.headerText,t.options.linecount)})),i.a.createElement("div",{id:"Chart_"+t.panelId,style:{height:t.height,width:t.width}})});r.d(e,"plugin",(function(){return d}));var d=new n.PanelPlugin((function(t){var e=t.options,r=t.data,n=t.width,o=t.height,c=t.id,s=a({},e),l={};try{l=function(t){var e=[],r=["rgba(223, 79, 79,1)","rgba(88, 223, 79,1)","rgba(79, 145, 223,1)","rgba(223, 79, 168,1)","rgba(223, 155, 79,1)","rgba(79, 223, 192,1)","rgba(138, 79, 223,1)","rgba(166, 223, 79,1)","rgba(147, 50, 55,1)","rgba(50, 147, 142,1)","rgba(59, 147, 50,1)","rgba(94, 50, 147,1)","rgba(147, 78, 50,1)","rgba(50, 81, 147,1)"],n=t.series;if(0==n.length)return[];for(var a=0;a<n.length;a++){var o=n[a].name;e[a]={org:o,data:[]};for(var i=n[a].fields,c=0;c<i[0].values.length;c++){var s=i[0].values.buffer[c],l=i[1].values.buffer[c];e[a].data[c]={date:s,value:l,rank:0,orig_index:parseInt(a)}}}for(a=0;a<e[0].data.length;a++){var u=[];for(c=0;c<e.length;c++)u[c]=e[c].data[a];u.sort((function(t,e){return e.value-t.value}));for(var d=0;d<u.length;d++)e[u[d].orig_index].data[a].rank=d}for(a=0;a<e.length;a++)for(c=0;c<e[0].data.length;c++)e[a].data[c].org=e[a].org,e[a].data[c].color=r[a%r.length];var p=[];for(var a in e){var f=e[a].data[e[a].data.length-1];p[a]={org:f.org,rank:f.rank}}p.sort((function(t,e){return t.rank-e.rank}));var h=[];for(a=0;a<e[0].data.length;a++)h[a]=e[0].data[a].date;return{parsedData:e,finalPositions:p,colorPal:r,dates:h}}(r)}catch(t){}return i.a.createElement(u,{height:o,width:n,panelId:c,options:s,data:l})})).setPanelOptions((function(t){return t.addNumberInput({path:"linecount",name:"Number of lines",description:"Number of lines to show",defaultValue:10}).addTextInput({path:"headerText",name:"Axis Header",description:"Axis header display",defaultValue:"Axis header"})}))}])}));
//# sourceMappingURL=module.js.map